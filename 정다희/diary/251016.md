### 오늘 배운 내용 중 가장 기억에 남는 것
#### Thymeleaf 문법
HTML에서 서버 데이터를 표현할 때 사용하는 템플릿 엔진 Thymeleaf의 문법을 배웠다.  
HTML 상단에 아래 네임스페이스를 추가하면 th: 접두어를 사용할 수 있다.  

```html
<html xmlns:th="http://www.thymeleaf.org">
```

| 문법          | 설명             | 예시                                                      |
| ----------- | -------------- | ------------------------------------------------------- |
| `th:text`   | 텍스트 출력         | `<p th:text="${user.name}"></p>`                        |
| `th:if`     | 조건문            | `<p th:if="${age >= 20}">성인입니다</p>`                     |
| `th:each`   | 반복문            | `<li th:each="item : ${items}" th:text="${item}"></li>` |
| `th:action` | form action 지정 | `<form th:action="@{/items/add}" method="post">`        |

#### 폼 바인딩

- th:object="${user}" : 폼의 기본 객체(커맨드 객체) 지정
- th:field="*{name}" : name/id/value를 한 방에 매핑
- 오류 표시: #fields.hasErrors('name') + th:errors="*{name}"

```html
<form th:action="@{/user/register}" th:object="${user}" method="post">
  이름: <input type="text" th:field="*{name}">
  <div th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div><br>

  아이디: <input type="text" th:field="*{userName}">
  <div th:if="${#fields.hasErrors('userName')}" th:errors="*{userName}"></div><br>

  이메일: <input type="text" th:field="*{email}">
  <div th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div><br>

  비밀번호: <input type="password" th:field="*{password}">
  <div th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div><br>

  <input type="submit" value="회원가입">
</form>
```

#### Validation(검증) — Bean Validation + Spring MVC 흐름

```java
@Getter @Setter
@NoArgsConstructor @AllArgsConstructor
public class User {

    @NotEmpty(message = "이름을 입력하세요.")
    private String name;

    @NotEmpty(message = "아이디를 입력하세요.")
    private String userName;

    @NotEmpty(message = "이메일을 입력하세요.")
    @Email(message = "올바른 이메일 형식을 입력하세요.")
    private String email;

    private boolean admin;

    @NotEmpty(message = "비밀번호를 입력하세요.")
    @Size(min = 4, max = 10, message = "비밀번호는 4자 이상, 10자 이하로 입력 해 주세요.")
    private String password;
}
```

```java
@Controller
@RequestMapping("/user")
public class UserController {

    @GetMapping("/register")
    public String registerForm(Model model) {
        model.addAttribute("user", new User());
        return "registerForm";
    }

    @PostMapping("/register")
    public String register(@Valid @ModelAttribute("user") User user,
                           BindingResult bindingResult) {

        if (bindingResult.hasErrors()) {
            // 검증 실패 → 같은 폼 뷰로 되돌아가서 오류 출력
            return "registerForm";
        }

        // TODO: 정상 로직 (회원 저장 등)
        return "redirect:/"; // PRG 패턴
    }
}
```

- @Valid(또는 @Validated)로 DTO에 선언한 제약을 실행.
- BindingResult는 @Valid 바로 뒤 파라미터여야 검증 오류가 예외로 터지지 않고 바인딩 됨.
- 오류가 있으면 같은 폼으로 리턴 → Thymeleaf의 th:errors가 메시지를 표시.
- 성공 시 PRG(Post/Redirect/Get)로 중복 제출 방지.



***

### 오늘 배운 내용 중 어려웠던 것

#### 포워드(Forward)와 리다이렉트(Redirect)

**개념**
- **포워드(Forward)**: 서버 내부에서 요청을 전달하는 방식. URL은 바뀌지 않고, 같은 요청/응답 객체를 공유한다.
- **리다이렉트(Redirect)**: 클라이언트에게 새 요청을 하라고 응답을 보내는 방식. 브라우저의 URL이 변경되고, 새로운 요청이 발생한다.

**차이점 요약**

| 구분 | 포워드(Forward) | 리다이렉트(Redirect) |
|------|-----------------|---------------------|
| 요청 횟수 | 1회 (서버 내부 이동) | 2회 (클라이언트 재요청) |
| URL 변화 | 유지됨 | 변경됨 |
| 데이터 유지 | Request 범위만 유지 | 새 요청이므로 사라짐 |
| 사용 예시 | 검증 실패 후 같은 페이지로 돌아갈 때 | 회원가입/등록 성공 후 목록 페이지로 이동할 때 |

**코드 예시**

```java
// Forward (서버 내부 이동)
@RequestMapping("/forwardTest")
public String forwardExample() {
    return "user/registerForm"; // 뷰 이름 반환
}

// Redirect (새 요청)
@RequestMapping("/redirectTest")
public String redirectExample() {
    return "redirect:/user/list"; // redirect: prefix 사용
}
```

#### 리다이렉트 실무 사용 예시

| 상황 | 설명 | 
|------|------|
| 회원가입 완료 후 로그인 페이지로 이동 | 폼 제출 후 DB 저장 완료 → 새로고침 방지 |
| 게시글 작성 후 목록 페이지로 이동 | 새 게시글 등록 후 목록으로 이동 |
| 수정 완료 후 상세 페이지로 이동 | 수정된 결과를 즉시 확인하게 함 |
| 삭제 후 목록으로 이동 | 삭제 완료 후 중복 요청 방지 | 


> 리다이렉트는 **데이터 처리(등록·수정·삭제) 이후 화면 이동**에 거의 항상 사용된다.  
> 새로고침 중복 요청을 막고, URL이 깔끔하게 정리되는 장점이 있다.

***

### 오늘 강의시간, 회고시간에 대한 느낀점

오늘은 타임리프의 기본 문법과 폼 검증(Validation) 과정을 직접 다뤄보면서,   
서버에서 데이터가 어떻게 흐르는지 한눈에 이해할 수 있었다. 단순히 화면에 데이터를 출력하는 걸 넘어서,   
입력값이 서버로 넘어가고 다시 뷰로 되돌아오는 과정을 눈으로 확인하니까 백엔드와 프론트가 이렇게 연결되는구나 하는 감이 잡혔다.  

특히 @Valid, BindingResult, th:field의 관계가 흥미로웠다.  
예전에는 단순히 에러 메시지를 띄우는 게 어떻게 가능한지 몰랐는데,  
검증 결과가 BindingResult에 담기고, 그걸 타임리프에서 th:errors로 표현한다는 흐름을 직접 코드를 통해 보니까 훨씬 명확해졌다.  
또, redirect:를 이용한 PRG 패턴의 필요성도 확실히 느꼈다. 
단순히 화면만 보여주는 것과 리다이렉트로 새로운 요청을 보내는 것의 차이를 비교하면서,  
실무에서는 왜 리다이렉트를 거의 항상 쓰는지 이해할 수 있었다. 

그리고 한 번의 요청 안에서 끝나는 forward와 새로운 요청으로 이어지는 redirect의 차이는 단순한 화면 이동 이상의 의미가 있다는 걸 알게 되었다.  
오늘은 단순히 문법을 익힌 게 아니라, 스프링 MVC의 요청 흐름 전체를 한눈에 정리한 느낌이었다.  
앞으로는 폼 처리 로직을 짤 때 항상 검증 실패면 forward, 성공 시 redirect를 염두에 두면서 코드를 짜야겠다.