### 오늘 배운 내용 중 가장 기억에 남는 것
#### 쿠키(Cookie)
```java
// 쿠키 생성 (저장)
@GetMapping("/addCookie")
public String addCookie(@RequestParam("cookieName") String cookieName,
                        @RequestParam("cookieValue") String cookieValue,
                        HttpServletResponse response) {

    // 1️⃣ 쿠키 객체 생성 (name, value)
    Cookie cookie = new Cookie(cookieName, cookieValue);

    // 2️⃣ 쿠키 경로 및 유효기간 설정
    cookie.setPath("/");               // 모든 경로에서 접근 가능
    cookie.setMaxAge(60 * 60 * 24);    // 1일 동안 유지

    // 3️⃣ 응답에 쿠키 추가 → 브라우저가 저장
    response.addCookie(cookie);

    return "redirect:/cookieView";
}
```

```java
// 쿠키 조회
@GetMapping("/cookieView")
public String cookieView(HttpServletRequest request, Model model) {

    // 1️⃣ 브라우저가 보유한 모든 쿠키 가져오기
    Cookie[] cookies = request.getCookies();

    // 2️⃣ 쿠키를 Map 형태로 정리해 View로 전달
    List<Map<String, String>> cookieList = new ArrayList<>();
    if (cookies != null) {
        for (Cookie cookie : cookies) {
            Map<String, String> map = new HashMap<>();
            map.put("name", cookie.getName());
            map.put("value", cookie.getValue());
            cookieList.add(map);
        }
    }
    model.addAttribute("cookieList", cookieList);
    return "cookieView";
}
```

```java
// 쿠키 삭제
@GetMapping("/cookieDelete")
public String cookieDelete(HttpServletResponse response) {

    // 1️⃣ 같은 이름으로 쿠키 생성
    Cookie cookie = new Cookie("admin", "");

    // 2️⃣ 수명 0초 설정 → 브라우저 즉시 삭제
    cookie.setMaxAge(0);
    cookie.setPath("/");

    response.addCookie(cookie);
    return "redirect:/cookieView";
}
```

#### 세션(Session)
```java
// 세션 저장
@GetMapping("/addSession")
public String addSession(@RequestParam("sessionKey") String sessionKey,
                         @RequestParam("sessionValue") String sessionValue,
                         HttpSession session) {

    // 1️⃣ 세션에 key-value 저장
    session.setAttribute(sessionKey, sessionValue);

    // 2️⃣ 서버 내부 메모리에 저장되며, 브라우저에는 JSESSIONID만 쿠키로 전달됨
    return "redirect:/sessionView";
}
```

```java
// 세션 조회
@GetMapping("/sessionView")
public String sessionView(HttpSession session, Model model) {

    // 1️⃣ 세션에 저장된 모든 속성(key-value) 가져오기
    Map<String, Object> map = new HashMap<>();
    Enumeration<String> attributeNames = session.getAttributeNames();

    // 2️⃣ 반복문으로 세션 속성을 Map에 담기
    while (attributeNames.hasMoreElements()) {
        String name = attributeNames.nextElement();
        Object value = session.getAttribute(name);
        map.put(name, value);
    }

    // 3️⃣ 모델에 담아 뷰로 전달
    model.addAttribute("session", map);
    return "sessionView";
}
```

```java
// 세션 삭제
@GetMapping("/sessionDelete")
public String sessionDelete(HttpSession session) {

    // 1️⃣ 부분 삭제 (특정 속성만)
    // session.removeAttribute("admin");

    // 2️⃣ 전체 삭제 (세션 만료)
    session.invalidate();

    return "redirect:/sessionView";
}
```

***

### 오늘 배운 내용 중 어려웠던 것

#### 쿠키와 세션의 비교
| 구분 | 쿠키(Cookie) | 세션(Session) |
|---|---|---|
| 저장 위치 | **클라이언트(브라우저)** | **서버(세션 저장소)** |
| 신뢰 주체 | 클라이언트(신뢰 낮음) | 서버(상대적 신뢰 높음) |
| 전송 방식 | 매 요청마다 `Cookie` 헤더에 자동 포함 | 세션 **ID(JSESSIONID)** 만 쿠키로 전송, 값은 서버에 보관 |
| 수명 관리 | `Max-Age/Expires`로 제어 (영속 가능) | 서버 타임아웃/브라우저 종료 시 만료(기본) |
| 용량/개수 | 도메인당 수 개, 개별 쿠키 ≈ 4KB 제한 | 서버 메모리(및 분산 세션 저장소) 한계 |
| 보안 옵션 | `HttpOnly`, `Secure`, `SameSite` 등 적용 가능 | 서버측 관리 + 세션고정/탈취 방지 필요 |
| 대표 사용처 | 테마/최근 본 항목/| 로그인 상태/권한/장바구니|

#### 2) 헷갈리기 쉬운 포인트
- **“둘 다 쿠키를 쓴다?”** → 세션도 쿠키를 쓰지만 **세션ID만** 쿠키로 주고받는다. 실제 데이터는 **서버**에 있다.
- **삭제 방식** → 쿠키는 동일 이름으로 `Max-Age=0` 설정해 **브라우저에서 삭제**. 세션은 `removeAttribute()`(부분) 또는 `invalidate()`(전체)로 **서버에서 삭제**.
- **권한 체크 위치** → 쿠키 값만으로 권한을 판단하면 변조 위험. **권한은 세션(또는 서버측 토큰 검증)** 으로 처리.

#### 3) 실무 판단 기준 (요약)
- **민감 여부**: 민감/보안 요구 높음 → 세션(서버 저장). 가벼운 선호도 → 쿠키.
- **지속성 필요**: 브라우저 닫아도 유지 필요 → 쿠키 `Max-Age`로 영속. 로그인과 같은 보안 상태 → 세션 + 적절한 타임아웃.
- **규모/확장성**: 사용자별 데이터가 많음 → 서버 세션은 메모리 부담(분산 세션/외부 저장소 고려).


> **저장 위치(클라 vs 서버)와 신뢰 주체**를 기준으로 역할을 구분하면 혼동이 줄어든다.

***

### 오늘 강의시간, 회고시간에 대한 느낀점

오늘 실습을 통해 쿠키와 세션의 동작 차이를 직접 코드로 확인할 수 있었다.  
특히 쿠키는 클라이언트 저장, 세션은 서버 저장이라는 구조적 차이가 가장 인상 깊었다.  
코드를 직접 실행하면서 쿠키가 브라우저에 저장되고, 세션은 서버 메모리에 남는다는 흐름을 눈으로 확인하니 훨씬 이해가 쉬웠다.  
앞으로 로그인 기능을 구현할 때는 세션을 안전하게 활용하고, 단순한 UI 상태 유지엔 쿠키를 적절히 사용해야겠다.  