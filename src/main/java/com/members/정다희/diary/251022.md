### 오늘 배운 내용 중 가장 기억에 남는 것

#### JPA의 동작 원리와 영속성 컨텍스트

JPA(Java Persistence API)는 자바 애플리케이션에서 객체와 관계형 데이터베이스를 매핑해주는 프레임워크이다.   
JPA의 핵심은 영속성 컨텍스트(Persistence Context)로, 엔티티 객체를 저장, 조회, 수정, 삭제하는 모든 과정에서 엔티티의 상태를 관리하는 역할을 한다.  

- **영속성 컨텍스트**란 엔티티 객체를 보관하는 일종의 1차 캐시(메모리)이다.  
엔티티 매니저(EntityManager)가 엔티티 객체를 생성, 저장, 삭제할 때 이 컨텍스트를 통해 관리한다. 
- 영속성 컨텍스트에 저장된 엔티티는 데이터베이스와 동기화되어 변경감지(Dirty Checking), 1차 캐시, 쓰기 지연 등 다양한 기능을 제공한다. 

##### 주요 어노테이션 및 예시 코드

- `@Entity`: JPA가 관리하는 엔티티임을 나타낸다. 
- `@Id`: 엔티티의 기본 키(primary key)를 지정
- `@GeneratedValue`: 기본 키의 값 생성 전략을 지정

```java
import javax.persistence.*;

@Entity
public class Member {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String name;
    // Getter, Setter 등 생략
}
```

- `@Entity`를 붙이면 해당 클래스는 JPA가 관리하는 테이블과 매핑된다.
- `@Id`는 반드시 필요하며, 각 엔티티마다 하나만 존재해야 한다.
- `@GeneratedValue`를 사용하면 기본 키 값을 JPA가 자동으로 생성한다. (예: AUTO, IDENTITY, SEQUENCE, TABLE)

영속성 컨텍스트에 엔티티를 저장하면, 엔티티 매니저가 1차 캐시에 객체를 보관하고, 트랜잭션이 끝날 때 DB에 반영(Flush)된다.

***

### 오늘 배운 내용 중 어려웠던 것

#### 영속 상태와 비영속 상태의 차이

JPA에서 엔티티 객체는 주로 네 가지 상태를 가진다.  
비영속, 영속, 준영속, 삭제. 그 중 **영속 상태**와 **비영속 상태**의 차이가 가장 헷갈렸다.  

| 상태      | 설명                                      | 예시 코드                                      |
|-----------|-----------------------------------------|------------------------------------------------|
| 비영속    | 엔티티 객체가 생성되었지만, 영속성 컨텍스트에 저장되지 않은 상태 | `Member member = new Member();`                |
| 영속      | 엔티티 객체가 영속성 컨텍스트에 저장된 상태             | `em.persist(member);`                          |

```java
// 비영속 상태
Member member = new Member();
member.setName("홍길동");

// 영속 상태 (영속성 컨텍스트에 저장됨)
em.persist(member);
```

비영속 상태의 객체는 단순히 메모리에만 존재하며, JPA가 관리하지 않는다.  
반면, 영속 상태가 되면 JPA가 해당 객체를 관리하고, 트랜잭션이 끝날 때 DB에 자동으로 반영된다.

***

### 오늘 강의시간, 회고시간에 대한 느낀점

오늘은 JPA의 동작 원리와 영속성 컨텍스트에 대해 깊이 있게 배웠다.  
실제로 엔티티의 상태 변화와 영속성 컨텍스트의 역할을 코드로 실습하면서,  
JPA가 어떻게 DB와 객체를 매핑하고 상태를 관리하는지 이해할 수 있었다.  
아직 영속/비영속 상태의 개념이 완벽하게 익숙하지는 않지만, 직접 예제를 통해 차이를 비교해보니 점점 감이 오는 것 같다.  
앞으로 더 많은 실습을 통해 JPA의 원리를 확실히 익히고 싶다.  
오늘 강의와 회고를 통해 객체와 DB 사이의 연결고리를 이해하는 것이 얼마나 중요한지 다시 한 번 느꼈다.